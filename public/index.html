
<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ö‡∏¥‡∏Å‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß</title>
  <style>
    .logo-container {
      text-align: center;
      margin-bottom: 5px;
      padding-top: 20px;
    }
    .logo-container img {
      max-width: 150px;
      height: auto;
    }
    .form-container {
      margin-left: 10px;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11">
  </script>
</head>
<body>
  <div class="logo-container">
    <img src="https://www.dropbox.com/scl/fi/vh73i9yg9zgx0kicb9vrj/logo.jpg?rlkey=o20qqqr3bml6m52y5rxo9m272&st=tbtvqrni&raw=1" alt="‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó">
  </div>
  <h1 style="margin-left: 10px;">‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ö‡∏¥‡∏Å‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô</h1>
  <form class="form-container" id="oilForm">
    <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</label><br>
    <input type="date" name="date" required><br><br>

    <label>‡∏ä‡∏∑‡πà‡∏≠ üôã:</label><br>
    <input type="text" name="name" required><br><br>

    <label>‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ üöõ:</label><br>
    <input type="text" name="car_no" required><br><br>

    <label>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£:</label><br>
    <input type="tel" name="phone" required><br><br>

    <label>‡πÄ‡∏•‡∏Ç‡∏ö‡∏≤‡∏£‡πå:</label><br>
    <input type="text" name="barcode" required><br><br>

    <label>‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á:</label><br>
    <input type="text" name="route" required><br><br>

    <label>‡∏£‡∏≠‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡πÅ‡∏ï‡∏ô‡∏ö‡∏≤‡∏¢:</label><br>
    <input type="text" name="standby_round" required><br><br>

    <label>‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡πÅ‡∏ï‡∏ô‡∏ö‡∏≤‡∏¢:</label><br>
    <input type="time" name="standby_time" required><br><br>

    <label>‡∏≠‡∏≠‡∏Å‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á:</label><br>
    <input type="time" name="departure_time" required><br><br>

    <label>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:</label><br>
    <textarea name="note"></textarea><br><br>

    <label>‡∏Ñ‡πà‡∏≤‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß (‡∏ö‡∏≤‡∏ó):</label><br>
    <input type="number" name="trip_fee" id="trip_fee" required><br><br>

    <label>‡πÄ‡∏ö‡∏¥‡∏Å‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô (‡∏ö‡∏≤‡∏ó):</label><br>
    <input type="text" id="oil_claim" readonly><br><br>

    <label>‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£:</label><br>
    <select name="bank" required>
      <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£ --</option>
      <option value="‡∏Å‡∏£‡∏∏‡∏á‡πÑ‡∏ó‡∏¢">‡∏Å‡∏£‡∏∏‡∏á‡πÑ‡∏ó‡∏¢</option>
      <option value="‡∏Å‡∏™‡∏¥‡∏Å‡∏£‡πÑ‡∏ó‡∏¢">‡∏Å‡∏™‡∏¥‡∏Å‡∏£‡πÑ‡∏ó‡∏¢</option>
      <option value="‡πÑ‡∏ó‡∏¢‡∏û‡∏≤‡∏ì‡∏¥‡∏ä‡∏¢‡πå">‡πÑ‡∏ó‡∏¢‡∏û‡∏≤‡∏ì‡∏¥‡∏ä‡∏¢‡πå</option>
      <option value="‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û">‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û</option>
      <option value="‡∏ó‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢‡∏ò‡∏ô‡∏ä‡∏≤‡∏ï (TTB)">‡∏ó‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢‡∏ò‡∏ô‡∏ä‡∏≤‡∏ï (TTB)</option>
      <option value="‡∏≠‡∏≠‡∏°‡∏™‡∏¥‡∏ô">‡∏≠‡∏≠‡∏°‡∏™‡∏¥‡∏ô</option>
      <option value="‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡∏ï‡∏¥‡∏ô‡∏≤‡∏Ñ‡∏¥‡∏ô">‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡∏ï‡∏¥‡∏ô‡∏≤‡∏Ñ‡∏¥‡∏ô</option>
      <option value="‡∏ã‡∏µ‡πÑ‡∏≠‡πÄ‡∏≠‡πá‡∏°‡∏ö‡∏µ">‡∏ã‡∏µ‡πÑ‡∏≠‡πÄ‡∏≠‡πá‡∏°‡∏ö‡∏µ</option>
      <option value="‡∏¢‡∏π‡πÇ‡∏≠‡∏ö‡∏µ">‡∏¢‡∏π‡πÇ‡∏≠‡∏ö‡∏µ</option>
    </select><br><br>

    <label>‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</label><br>
    <input type="text" name="bank_name" required><br><br>

    <label>‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</label><br>
    <input type="text" name="bank_no" required><br><br>

    <button type="submit">‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
  </form>
<script>
  const form = document.getElementById('oilForm');
  const tripFeeInput = document.getElementById('trip_fee');
  const oilClaimInput = document.getElementById('oil_claim');

  tripFeeInput.addEventListener('input', () => {
    const fee = parseFloat(tripFeeInput.value) || 0;
    oilClaimInput.value = (fee * 0.5).toFixed(2);
  });

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const data = new FormData(form);
    const obj = {};
    data.forEach((value, key) => { obj[key] = value });
    obj.oil_claim = oilClaimInput.value;

    const dateParts = obj.date.split("-");
    obj.date = `${dateParts[2]}/${dateParts[1]}/${dateParts[0]}`;
    obj.oil_claim = oilClaimInput.value;
    const res = await fetch('/api/submit', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(obj)
    });
    const text = await res.text();
    Swal.fire('‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', text, 'success');
    form.reset();
    oilClaimInput.value = "";
  });

</script>
<script>
  async function checkDailyPassword() {
  const { value: inputPassword } = await Swal.fire({
    title: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô',
    input: 'password',
    inputPlaceholder: '‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô',
    inputAttributes: {
      autocapitalize: 'off',
      autocorrect: 'off'
    },
    showCancelButton: false,
    confirmButtonText: '‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö',
    allowOutsideClick: false
  });

  if (!inputPassword) {
    return checkDailyPassword();
  }

  const res = await fetch('/api/verify-password', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ password: inputPassword })
  });

  const result = await res.json();

  if (!result.valid) {
<<<<<<< HEAD
    await Swal.fire('‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á', '‡πÇ‡∏õ‡∏£‡∏î‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á', 'error');
    return checkDailyPassword();
  }
  await Swal.fire('‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
  }
=======
    await Swal.fire('‚ùå ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á', '‡πÇ‡∏õ‡∏£‡∏î‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á', 'error');
    return checkDailyPassword();
  }
  await Swal.fire('‚úÖ ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á', 'success');
  }

>>>>>>> 9785b4cf82b3274bb76a76f2441c78837bca7589
  checkDailyPassword();
</script>
</body>
</html>
